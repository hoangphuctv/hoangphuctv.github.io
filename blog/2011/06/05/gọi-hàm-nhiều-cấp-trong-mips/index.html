<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Gọi hàm nhiều cấp trong MIPS &middot; Tran Hoang Phuc</title>

  
  <link rel="stylesheet" href="https://hoangphuctv.github.io/css/poole.css">
  <link rel="stylesheet" href="https://hoangphuctv.github.io/css/hyde.css">
  <link rel="stylesheet" href="https://hoangphuctv.github.io/css/poole-overrides.css">
  <link rel="stylesheet" href="https://hoangphuctv.github.io/css/hyde-overrides.css">
  <link rel="stylesheet" href="https://hoangphuctv.github.io/css/hyde-x.css">
  <link rel="stylesheet" href="https://hoangphuctv.github.io/css/highlight/default.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://hoangphuctv.github.io/touch-icon-144-precomposed.png">
  <link href="https://hoangphuctv.github.io/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="Blog lập trình">
  <meta name="keywords" content="lap trinh blog, go, php, linux">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-90002072-5', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body class="theme-base-0b">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
      <h1>Tran Hoang Phuc</h1>
      
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="https://hoangphuctv.github.io/">Home</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      
      
      
      
      
      <a href="https://www.facebook.com/phucth.vn"><i class="fa fa-facebook-square fa-3x"></i></a>
      
      
      <a href="https://hoangphuctv.github.io/index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
      </li>
    </ul>

    

    <p>Copyright &copy; 2019 <a href="https://hoangphuctv.github.io/license/">License</a><br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>

  </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">Gọi hàm nhiều cấp trong MIPS</h1>
    <span class="post-date">Jun 5, 2011 &middot; 2 minute read
    
    <br/>
    <a class="label" href="https://hoangphuctv.github.io/categories/mips">MIPS</a>
    </span>
    <p>G?i hàm trong hàm, đ?i các ngôn ng? b?c cao th? quá d?, c?ng tương t? như g?i hàm ? chương tr?nh chính, nhưng trong MIPS th? không đơn gi?n như v?y, chúng ta ph?i x? lí trư?ng h?p thanh ghi $ra b? thay đ?i sau m?i l?n g?i hàm. Cách gi?i quy?t dùng 1 thanh ghi t?m đ? lưu tr? l?i giá tr? $ra t? ra không kh? quan, s? lư?ng thanh ghi trong MIPS là có h?ng (ch? 32 thanh ghi), do đó chúng ta s? lưu nó trên b? nh? nh? stack. V?y th? có g?i hàm n c?p th? v?n không s? b? &ldquo;l?c l?i&rdquo; v? thanh ghi $ra b? thay đ?i. Chúng ta l?y 1 ví d? như sau:</p>

<p><a name='more'></a><br />
&nbsp;Viêt b?ng C:<br />
<code>
#include &lt;conio.h&gt;   
#include &lt;stdio.h&gt;    
int Nhan (int a, int b)   
{   
  int n=0; // O day chi xet don gian la a, b cung duong.   while (b&gt;0)   {     n +=a;     b--;   }   return n;   
}    
int TongBinhPhuong(int a, int b)   
{   
  int n = Nhan (a,a);// Goi ham Nhan     
int m = Nhan (b,b); // Goi ham Nhan    
 return n+m;   
}   
void main()   
{   
  int n,m;    
 printf (&quot;Nhap vao so n:&quot;);    
 scanf (&quot;%d&quot;, &amp;n);    
 printf (&quot;Nhap vao so m:&quot;);    
 scanf (&quot;%d&quot;, &amp;m);    
 printf (&quot;Tong binh phuong nhan duoc la: %d&quot;, TongBinhPhuong(n,m));   
}   
</code><br />
Vi?t b?ng MIPS:<br />
`</p>

<p>.data<br />
 st_Nhapi:.asciiz &ldquo;Nhap vao n: &ldquo;<br />
 st_Nhapj:.asciiz &ldquo;Nhap vao m: &ldquo;<br />
.text<br />
main:<br />
la $a0, st_Nhapi<br />
addi $v0, $0, 4<br />
syscall<br />
 addi $v0, $0, 5<br />
 syscall<br />
addi $s0, $v0, 0<br />
  la $a0, st_Nhapj<br />
 addi $v0, $0, 4<br />
 syscall<br />
 addi $v0, $0, 5<br />
 syscall<br />
  addi $s1, $v0, 0<br />
  add $a0, $s0, 0<br />
add $a1, $s1, 0<br />
 jal SumS<br />
  addi $a0, $v0, 0<br />
 addi $v0, $0, 1<br />
 syscall<br />
exit:    addi $v0, $0, 10<br />
  syscall<br />
SumS:<br />
#luu lai thang $a1, $ra<br />
 addi $sp, $sp, -8<br />
 sw $a1, 4($sp)<br />
sw $ra, 0($sp)<br />
 #Luu xong<br />
addi $a1, $a0, 0<br />
 jal Nhan<br />
 #phuc hoi thang $a1, $ra<br />
 addi $sp, $sp, -4<br />
 sw $v0, 0($sp)<br />
 lw $a1, 8($sp)<br />
 addi $a0, $a1, 0<br />
 jal Nhan<br />
addi $a1, $v0, 0<br />
 lw $a0, 0($sp)<br />
 lw $ra, 4($sp)<br />
  addi $sp, $sp, 12<br />
  add $v0, $a0, $a1<br />
 jr $ra<br />
Nhan:<br />
 addi $sp, $sp, -4<br />
 sw $ra, 0($sp)<br />
 addi $v0, $0, 0<br />
 LapNhan:<br />
 slt $t0, $0, $a1<br />
 beq $t0, $0,KTLapNhan<br />
 add $v0, $v0, $a0<br />
   addi $a1, $a1, -1<br />
   j LapNhan<br />
 KTLapNhan:<br />
lw $ra, 0($sp)<br />
addi $sp, $sp, 4<br />
 jr $ra</p>

<p>`</p>

  </div>
  
</div>




<script src="https://hoangphuctv.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

