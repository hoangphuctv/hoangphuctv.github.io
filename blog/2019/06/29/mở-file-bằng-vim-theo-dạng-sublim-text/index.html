<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Mở file bằng vim theo dạng sublim text &middot; Tran Hoang Phuc</title>

  
  <link rel="stylesheet" href="https://hoangphuctv.github.io/css/poole.css">
  <link rel="stylesheet" href="https://hoangphuctv.github.io/css/hyde.css">
  <link rel="stylesheet" href="https://hoangphuctv.github.io/css/poole-overrides.css">
  <link rel="stylesheet" href="https://hoangphuctv.github.io/css/hyde-overrides.css">
  <link rel="stylesheet" href="https://hoangphuctv.github.io/css/hyde-x.css">
  <link rel="stylesheet" href="https://hoangphuctv.github.io/css/highlight/default.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://hoangphuctv.github.io/touch-icon-144-precomposed.png">
  <link href="https://hoangphuctv.github.io/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="Blog lập trình">
  <meta name="keywords" content="lap trinh blog, go, php, linux">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-90002072-5', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body class="theme-base-0b">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
      <h1>Tran Hoang Phuc</h1>
      
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="https://hoangphuctv.github.io/">Home</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      
      
      
      
      
      <a href="https://www.facebook.com/phucth.vn"><i class="fa fa-facebook-square fa-3x"></i></a>
      
      
      <a href="https://hoangphuctv.github.io/index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
      </li>
    </ul>

    

    <p>Copyright &copy; 2019 <a href="https://hoangphuctv.github.io/license/">License</a><br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>

  </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">Mở file bằng vim theo dạng sublim text</h1>
    <span class="post-date">Jun 29, 2019 &middot; 2 minute read
    
    <br/>
    <a class="label" href="https://hoangphuctv.github.io/categories/bash">bash</a><a class="label" href="https://hoangphuctv.github.io/categories/c%C3%B4ng-c%E1%BB%A5">Công cụ</a><a class="label" href="https://hoangphuctv.github.io/categories/sublime">sublime</a><a class="label" href="https://hoangphuctv.github.io/categories/svim">svim</a><a class="label" href="https://hoangphuctv.github.io/categories/vim">vim</a>
    </span>
    <p>Với sublime text khi bạn mở file mà muốn đứng ngay tại dòng thứ n sau khi mở file ra. Thì bạn mở theo dạng:</p>

<pre><code>subl index.php:5
</code></pre>

<p>Nhưng đối với vim thì cách truyền tham số vào sẽ khác:</p>

<pre><code>vim index.php +5
</code></pre>

<p>Nhưng nếu bạn dùng lệnh kết hợp vim + grep để tìm thông tin sẽ thấy khác bất tiện. Khi tìm function bằng grep sẽ tìm như sau:</p>

<pre><code>$ grep -rn 'function get_ip' .
</code></pre>

<p><code>grep</code> sẽ tìm trong tất cả các file trong thư mục đang đứng, và list ra file nào có dòng chữ <code>function get_ip</code>. Và kết quả của lệnh <code>grep</code> trả ra như sau:</p>

<pre><code>$ grep -rn 'function get_ip' .
 index.php:100: function get_ip() {
</code></pre>

<p>Lúc này bạn mới copy lại đoạn <code>index.php:100</code> rồi sao đó gõ <code>vim</code> past cái đoạn vừa copy vào, lùi lùi lại, xoá bỏ dấu <code>:</code>, đánh dấu <code>space</code> rồi thêm dấu + vào:</p>

<pre><code>$ vim index.php +100
</code></pre>

<p>Hoặc đường dẫn trong back trace của php cũng in theo dạng <code>tenfile.php:line</code> như sau:</p>

<pre class="wp-block-preformatted">#0  c() called at [/tmp/include.php:10]  
#1  b() called at [/tmp/include.php:6]  
#2  a() called at [/tmp/include.php:17]  
#3  include(/tmp/include.php) called at [/tmp/test.php:3]</pre>

<p>Mỗi lần như vậy rất mất thời gian. Giờ ta mong muốn rằng mở file bằng vim theo kiểu <code>vim index.php:100</code> để copy đường dẫn từ trên, past xuống là được luôn. Giờ ta hãy viết script, để giúp vim có thể mở được. Ta sẽ đặt tên nào đó gần giống vim. Ở đây mình chọn tên là <code>svim</code>. Bạn có thể chọn tên khác mà bạn thích. Mở file <code>/usr/local/bin/svim</code>, nhập đoạn script sau:</p>

<pre><code>$ sudo vim /usr/local/bin/svim





#!/bin/bash

# kiểm tra xem có tham số đầu tiên có rỗng hay không
param=$1
if [ &quot;$param&quot; == &quot;&quot; ]; then
    echo &quot;First param required&quot;;
    exit;
fi

file=`echo $param ' awk -F':' '{ print $1 }'`
line=`echo $param ' awk -F':' '{ print $2 }'`

vim $file +$line
</code></pre>

<p>Cấp quyền thực thi bằng lệnh:</p>

<pre><code>$ chmod +x /usr/local/bin/svim
</code></pre>

<p>Giờ có thể mở file bằng lệnh <code>svim</code> như sau:</p>

<pre><code>$ svim index:100
</code></pre>

<p>Rất tiện lợi và dễ nhớ.</p>

  </div>
  
</div>




<script src="https://hoangphuctv.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

